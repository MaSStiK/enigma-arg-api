const REPLY = [
    {text: "Reply from 77.85.11.60: ", speed: "instant"},
        {text: "Загрузка пакета Torify...", newLine: false},
    {text: "Reply from 77.85.11.60: ", speed: "instant"},
        {text: "Настройка Tor подключения завершена...", newLine: false},
    {text: "Reply from 77.85.11.60: ", speed: "instant"},
        {text: "Доступ в Даркнет получен...", newLine: false},

    {text: "&nbsp;"},
    {text: "Искатель, ты ", pause: 20},
        {text: "<mark>осмелился</mark>", newLine: false, type: "code", pause: 20},
            {text: " перейти черту допустимого.", newLine: false},
    {text: "Обратной дороги теперь нет."},

    {text: "&nbsp;"},
    {text: "Самые глубокие тайны корпорации спрятаны в сети ", pause: 20},
        {text: "<mark>Tor</mark>", newLine: false, type: "code", pause: 20},
            {text: ".", newLine: false},
    {text: "Я установил тебе нужные пакеты, чтобы ты мог к ним подключиться."},

    {text: "&nbsp;"},
    {text: "Теперь ты в Даркнете, где тени хранят секреты, которые не должны были быть раскрыты."},
    {text: "Перед тобой – след, ведущий к засекреченной тайне корпорации."},
    {text: "Но помни: каждый разгаданный шифр приближает тебя к цели, и цена за это уже назначена."},

    {text: "&nbsp;"},
    {text: "Используй уже имеющуюся у тебя ", pause: 20},
        {text: "<mark>ссылку</mark>", newLine: false, type: "code", pause: 20},
            {text: ", чтобы погрузиться в тёмные глубины даркнета.", newLine: false},
    {text: "Твоя цель — найти файл, который даст ответ на загадку."},

    {text: "&nbsp;"},
    {text: "Используй команду ниже, чтобы открывать сайты из Даркнета, оставаясь анонимным и незамеченным."},
    {text: "<mark>Пример:</mark>", type: "code", pause: 20},
        {text: " key-4-crypted.bat Ссылка.onion", newLine: false},

    {text: "&nbsp;"},
    {text: "Не теряй ни минуты — разгадка уже на горизонте, ты почти у цели!"},
    {text: "2347"},
    {text: "&nbsp;"},
];

// deep_sculk_oil.onion/hrbn*auth=directive-7
// hrmv_ecyys_uul.saquz/hvov*ggtl=qqxqcxvdk-7
// https://vk.com/club229819402
// https://planetcalc.ru/2468/

// key-4-crypted.bat deep_sculk_oil.onion/hrbn
// key-4-crypted.bat deep_sculk_oil.onion/hrbn*auth=directive-7

const REPLY_SUMMON_HEROBRINE = [
    {text: "[Socket-Connect] ", speed: "instant"},
    {text: "Инициализация сокет-соединения с Tor-сетью...", newLine: false, pause: 2000},
    {text: "[Socket-Connect] ", speed: "instant"},
    {text: "Установление защищённого канала связи...", newLine: false, pause: 2000},
    {text: "&nbsp;"},
    {text:
        `<div class="tor-wrapper">
            <div class="tor-inner">
                <h1>Извините!</h1>
                <p>У вас нету доступа к этой странице, если у вас возникла данная проблема пожалуйста свяжитесь с нами: <a href="https://vk.com/enigma2347" target="_blank">https://vk.com/enigma2347</a></p>
                <p>Возможно, вы попали на эту страницу, потому что:</p>
            </div>

            <section class="tor__additional-info">
                <ul>
                    <li>
                        <div class="tor__info-image">
                            <img src="https://enigma-arg-api.vercel.app/tor/server_misconfigured.png">
                        </div>
                        <p class="tor__heading-text">У вас недостаточный уровень допуска.</p>
                    </li>
                    <li>
                        <div class="tor__info-image">
                            <img src="https://enigma-arg-api.vercel.app/tor/IP_changed.png">
                        </div>
                        <p class="tor__heading-text">IP - адрес был изменён.</p>
                    </li>
                    <li>
                        <div class="tor__info-image">
                            <img src="https://enigma-arg-api.vercel.app/tor/server_moved.png">
                        </div>
                        <p class="tor__heading-text">Сайт мог быть перенесён на другой сервер.</p>
                    </li>
                </ul>
            </section>

            <div class="tor__cpanel">
                <img src="https://enigma-arg-api.vercel.app/tor/powered_by_cpanel.svg" alt="powered_by_cpanel">
                <p>Copyright © 2025 cPanel, L.L.C.</p>
            </div>
        </div>`,
        type: "code"
    },
    {text: "&nbsp;"},
]

const REPLY_SUMMON_HEROBRINE_AUTH = [
    {text: "[Socket-Connect] ", speed: "instant"},
    {text: "Инициализация сокет-соединения с Tor-сетью...", newLine: false, pause: 2000},
    {text: "[Socket-Connect] ", speed: "instant"},
    {text: "Установление защищённого канала связи...", newLine: false, pause: 2000},
    {text: "&nbsp;"},
    {text:
        `<div class="encrypted">
            <h1 class="warning">⚠ ДОСТУП К РЕСУРСУ РАЗРЕШЕН ⚠</h1>
            <h2 class="warning">УРОВЕНЬ ДОСТУПА: МАКСИМАЛЬНЫЙ</h2>

            <h3>MCP-666 – "Херобрин"</h3>
            <p>Объект представляет собой неизвестную аномалию, связанную с добычей скалк-нефти. Чаще всего его замечали в непосредственной близости от мест её выкачивания. Появление объекта сопровождается массовыми сбоями оборудования, исчезновением рабочих и аномальными слуховыми и зрительными феноменами.</p>
            <p>Все попытки исследования объекта были прекращены после [ДАННЫЕ УДАЛЕНЫ].</p>
            <br>
            <p><strong>Поведение:</strong> <span>Враждебный при контакте</span></p>
            <p><strong>Сила:</strong> <span class="danger">НЕИЗВЕСТНО</span></p>
            <p><strong>Здоровье:</strong> <span class="danger">НЕИЗВЕСТНО</span></p>
            <p><strong>Месторасположение:</strong> <span class="danger">НЕИЗВЕСТНО</span></p>

            <h2 class="glitch">⚠ ТРЕБУЕТСЯ РАСКРЫТЬ СКРЫТОЕ ПОСЛАНИЕ ⚠</h2>

            <div class="image-container">
                <img src="https://enigma-arg-api.vercel.app/encrypted/encrypted.png" alt="Объект">
                <div class="coordinates">Координаты: X-95.5130, Z488.4790</div>
            </div>
        </div>`,
        type: "code"},
    {text: "&nbsp;"},

]
const REPLY_ERROR_404 = [
    {text: "[Socket-Connect] ", speed: "instant"},
    {text: "Инициализация сокет-соединения с Tor-сетью...", newLine: false, pause: 2000},
    {text: "[FATAL ERROR] 0xD4RKNET_404 - Соединение потеряно!"},
    {text: "Запрашиваемый .onion сайт недоступен или не существует."},
    {text: "&nbsp;"},
];

export async function GET(req) {
    const url = new URL(req.url);
    const answer = url.searchParams.get("answer");
    let reply;

    if (answer) {
        let answerLower = answer.toLowerCase();
        if (answerLower.startsWith("deep_sculk_oil.onion/hrbn")) {
            reply = answerLower === "deep_sculk_oil.onion/hrbn*auth=directive-7"
                ? REPLY_SUMMON_HEROBRINE_AUTH
                : REPLY_SUMMON_HEROBRINE
        } else {
            reply = REPLY_ERROR_404;
        }
    } else {
        reply = REPLY;
    }

    console.log("[GET] key-4-crypted.bat, answer: " + answer)
    
    return new Response(
        JSON.stringify(reply),
        {
            headers: {
                "Content-Type": "application/json",
                "Access-Control-Allow-Origin": "*",
                "Access-Control-Allow-Methods": "GET",
            },
            status: 200,
        }
    );
}
